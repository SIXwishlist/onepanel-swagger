get:
  operationId: get_provider_managers
  x-onedata-version: 3
  x-onedata-module: rest_service
  x-onedata-resource: service_cluster_manager
  tags:
    - Oneprovider
  summary: Get provider manager nodes
  description: |
    Returns the list of hostnames where Oneprovider cluster manager instances 
    are deployed (not necessarily currently running).
  produces:
    - application/json
  responses:
    '200':
      description: |
        Returns the list of Oneprovider cluster manager nodes in this 
        deployment.
      schema:
        $ref: '#/definitions/ServicesStatus'
    '400':
      description: Invalid request.
      schema:
        $ref: '#/definitions/Error'
    '403':
      description: Forbidden request.
      schema:
        $ref: '#/definitions/Error'
    '404':
      description: Oneprovider service configuration is not available. 
      schema:
        $ref: '#/definitions/Error'
    '500':
      description: Internal server error.
      schema:
        $ref: '#/definitions/Error'


put:
  operationId: add_provider_manager_hosts
  x-onedata-version: 3
  x-onedata-module: rest_service
  x-onedata-resource: service_cluster_manager
  tags:
    - Oneprovider
  summary: Add provider manager hosts
  description: |
    Allows to set the list of cluster manager nodes in the local 
    Oneprovider deployment.
  consumes:
    - application/json
  responses:
    '204':
      description: Operation successful.
      headers:
        Location:
          type: string
          description: |
            The path to the task resource, which can be queried to 
            check operation status.
    '400':
      description: Invalid request.
      schema:
        $ref: '#/definitions/Error'
    '403':
      description: Forbidden request.
      schema:
        $ref: '#/definitions/Error'
    '404':
      description: Onepanel service not found. 
      schema:
        $ref: '#/definitions/Error'
    '500':
      description: Internal server error.
      schema:
        $ref: '#/definitions/Error'
  parameters:
  - name: hosts
    in: body
    schema:
      $ref: '#/definitions/ManagerHosts'
    required: false


patch:
  operationId: provider_managers_start_stop
  x-onedata-version: 3
  x-onedata-module: rest_service
  x-onedata-resource: service_cluster_manager
  summary: Start/stop provider manager nodes
  tags:
    - Oneprovider
  description: >
   Starts or stops all Oneprovider cluster manager nodes in the local deployment.
  responses:
    '204':
      description: Cluster manager nodes state changed successfully.
    '400':
      description: Invalid request.
      schema:
        $ref: '#/definitions/Error'
    '403':
      description: Forbidden request.
      schema:
        $ref: '#/definitions/Error'
    '404':
      description: Oneprovider service configuration is not available. 
      schema:
        $ref: '#/definitions/Error'
    '500':
      description: Internal server error.
      schema:
        $ref: '#/definitions/Error'
  parameters:
  - name: started
    in: query
    description: |
      This flag changes the intended state of the cluster manager instances. 

      If the state is changed, the service will be stopped or started in order 
      to match the requested state. 
    type: boolean
    required: false
    default: true
