get:
  operationId: provider_get_manager_status
  x-onedata-service: oneprovider
  x-onedata-module: installer_cm
  x-onedata-method: get_status
  description: Returns the status of specific cluster manager instance.
  produces:
    - application/json
  responses:
    '200':
      description: The status of a specific Oneprovider cluster manager node.
      schema:
        $ref: '#/definitions/clustermanager'
    '400':
      description: Invalid request.
      schema:
        $ref: '#/definitions/error'
    '403':
      description: Forbidden request.
      schema:
        $ref: '#/definitions/error'
    '404':
      description: There is no Oneprovider cluster manager instance on this node.
      schema:
        $ref: '#/definitions/error'
    '500':
      description: Internal server error.
      schema:
        $ref: '#/definitions/error'
  parameters:
  - name: hosts
    description: |
      The host name from which the information about the specific Oneprovider cluster manager instance should be returned.
    in: path
    type: string
    required: true
    maxItems: 1
    minItems: 1


put:
  operationId: provider_add_manager_nodes
  x-onedata-service: oneprovider
  x-onedata-module: installer_cm
  x-onedata-method: add_node
  description: >
   Adds new cluster manager to a specific node or list of nodes, specified as host names.
  consumes:
    - application/json
  responses:
    '200':
      description: Configuration updated successfully
      schema:
        type: string
    '400':
      description: Invalid request.
      schema:
        $ref: '#/definitions/error'
    '403':
      description: Forbidden request.
      schema:
        $ref: '#/definitions/error'
    '404':
      description: Oneprovider service configuration is not available. 
      schema:
        $ref: '#/definitions/error'
    '500':
      description: Internal server error.
      schema:
        $ref: '#/definitions/error'
  parameters:
  - name: hosts
    description: The list of hosts where the Oneprovider cluster managers should be enabled.
    in: path
    type: array
    items:
      type: string
    collectionFormat: csv
    required: true
  - name: managerParams
    in: body
    description: New Oneprovider configuration in YAML format.
    schema:
      $ref: '#/definitions/clustermanager'
    required: true


patch:
  operationId: provider_manager_start_stop
  x-onedata-service: oneprovider
  x-onedata-module: installer_cm
  x-onedata-method: start_stop
  description: >
   Starts or stops cluster manager instance on a given site.
  consumes:
    - application/x-yaml
  responses:
    '200':
      description: Configuration updated successfully
      schema:
        type: string
    '400':
      description: Invalid request.
      schema:
        $ref: '#/definitions/error'
    '403':
      description: Forbidden request.
      schema:
        $ref: '#/definitions/error'
    '404':
      description: Oneprovider service configuration is not available. 
      schema:
        $ref: '#/definitions/error'
    '500':
      description: Internal server error.
      schema:
        $ref: '#/definitions/error'
  parameters:
  - name: hosts
    description: The list of hosts where the Oneprovider managers should be enabled.
    in: path
    type: array
    items:
      type: string
    collectionFormat: csv
    required: true
  - name: started
    in: query
    description: |
      This flag changes the intended state of the cluster manager instance. 

      If the state is changed, the service will be stopped or started in order to match the requested state. 
    type: boolean
    required: true


delete:
  operationId: provider_remove_manager_node
  x-onedata-service: oneprovider
  x-onedata-module: installed_cm
  x-onedata-method: remove_node
  description: Removes specific manager instance from Oneprovider deployment.
  responses:
    '200':
      description: Cluster manager node removed successfully.
      schema:
        $ref: '#/definitions/clustermanager'
    '400':
      description: Invalid request.
      schema:
        $ref: '#/definitions/error'
    '404':
      description: Cluster manager is not installed on this host.
      schema:
        $ref: '#/definitions/error'
    '500':
      description: Internal server error.
      schema:
        $ref: '#/definitions/error'
  parameters:
  - name: hosts
    in: path
    description: Host name from which the cluster manager should be removed.
    type: string
    required: true 
